<div class="mb-5">
    <mat-accordion *ngIf="regression && (regression.descriptions.length || regression.caption)">
        <mat-expansion-panel [(expanded)]="isPanelOpen" (opened)="isPanelOpen = true" (closed)="isPanelOpen = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    {{regression.caption}}
                </mat-panel-title>
            </mat-expansion-panel-header>
            <hr class="mt-0 pt-0">
            <h4>Questions:</h4>
            <ul class="my-0 py-0">
                <div *ngFor="let qa of regression.qas">
                    <button (click)="getAnswer(qa.answer)" color="primary" class="mb-2" mat-stroked-button>{{qa.question}}</button>
                </div>
            </ul>
            <hr class="mt-2 pt-0">
            <h4>Notes:</h4>
            <ul class="my-0 py-0">
                <li *ngFor="let description of regression.descriptions">
                    <h4>{{description}}</h4>
                </li>
            </ul>
        </mat-expansion-panel>
    </mat-accordion>
</div>

<div class="row">
    <div class="col-lg-8">
        <form [formGroup]="goalForm" class="mb-5">
            <div class="form-row">
                <div class="form-group col-md-6">
                    <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Shots</mat-label>
                        <input type="number" matInput formControlName="shotsControl" min="0" autocomplete="off" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null" required>
                    </mat-form-field>
                </div>
                <div class="form-group col-md-6">
                    <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Shots on Target</mat-label>
                        <input type="number" matInput formControlName="shotsOnTargetControl" min="0" autocomplete="off" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null" required>
                    </mat-form-field>
                    <div class="d-flex justify-content-between">
                        <div>
                        </div>
                        <div>
                            <button (click)="submit()" color="primary" mat-raised-button>Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="jumbotron">
            <div class="d-flex justify-content-between">

                <h3 style="color: red;" *ngIf="timeout">Could not connect to the remote server.</h3>
                <h3 *ngIf="winner">{{winner}}</h3>
                <h3 *ngIf="!winner && !timeout">The goal approximation will be displayed here</h3>
                <mat-spinner *ngIf="isHTTPRequesting" [diameter]="30"></mat-spinner>
            </div>
            <hr class="mt-0 pt-0">
            <div *ngIf="winner">
                <h3>Response:</h3>
                <ul class="row">
                    <li *ngFor="let item of responseBody | keyvalue: returnZeroPipe" class="col-lg-6">
                        <h4 style="display: inline">{{item.key}}: </h4>
                        <button style="display: inline; cursor: default; border: none;" class="btn-sm" mat-stroked-button color="primary" disableRipple="true">{{item.value}}</button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-lg-4" style="width: 100%; height: 100%;">
        <plotly-plot [data]="regressionPlot.data" [layout]="regressionPlot.layout" [config]="regressionPlot.config" [style]="{width: '100%', height: '100%'}"></plotly-plot>
    </div>
</div>